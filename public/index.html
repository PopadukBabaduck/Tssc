<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Головний сервісний центр</title>
  <link rel="stylesheet" href="style.css">
  <!-- ===== Патч для мобільного меню ===== -->
  <style>
    @media (max-width: 900px) {
      .main-nav { display: none; }
      .main-nav.open { display: block; }

      .main-nav .dropdown-menu {
        position: static !important;
        box-shadow: none;
        padding-left: 20px;
        display: none;
      }
      .main-nav .dropdown.open > .dropdown-menu {
        display: block;
      }
    }

    /* Стиль для отображения ФИО пользователя */
    .check-result .user-fullname {
      text-align: center;
      font-size: 1.5em;
      font-weight: 600;
      background: rgba(0, 150, 0, 0.05);
      padding: 0.5em 0;
      margin-bottom: 1em;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-top">
      <!-- Логотип -->
      <div class="logo-col">
        <div class="dots"><span></span><span></span><span></span></div>
        <div class="logo-text">
          <div>Головний</div>
          <div>сервісний</div>
          <div>центр</div>
          <small>МВС</small>
        </div>
      </div>
      <!-- Кнопка пошуку -->
      <button class="search-btn" aria-label="Пошук">
        <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="11" cy="11" r="8" stroke="#333" stroke-width="2" fill="none"/>
          <line x1="16" y1="16" x2="22" y2="22" stroke="#333" stroke-width="2"/>
        </svg>
      </button>
      <!-- Герб + телефон -->
      <div class="center-col">
        <img src="gerb.png" alt="Тризуб" class="crest">
        <a href="tel:+0442901988" class="phone">(044)&nbsp;290-19-88</a>
      </div>
      <!-- Права частина -->
      <div class="right-col">
        <a href="#" class="btn-success">
          <span class="icon">✓</span><span class="text">Успіхи 2022</span>
        </a>
        <div class="social-icons">
          <a href="#"><img src="fab.png" alt="Facebook"></a>
          <a href="#"><img src="inst.png" alt="Instagram"></a>
          <a href="#"><img src="you.png" alt="YouTube"></a>
          <a href="#"><img src="tgg.png" alt="Telegram"></a>
        </div>
        <a href="#" class="visually-link">
          <img src="gl.png" alt="Для людей із порушенням зору">
          <span><div>Людям із</div><div>порушенням</div><div>зору</div></span>
        </a>
      </div>
    </div>

    <!-- Гамбургер для мобілок -->
    <button id="nav-toggle" class="nav-toggle" aria-label="Відкрити меню">☰</button>

    <!-- Навігація -->
    <nav class="main-nav">
      <ul>
        <li class="dropdown">
          <button>Про ГСЦ</button>
          <ul class="dropdown-menu">
            <li><a href="#">Хто ми</a></li>
            <li><a href="#">Новини</a></li>
            <li><a href="#">Структура</a></li>
            <li><a href="#">Керівництво</a></li>
            <li><a href="#">Сервісні центри у медіа</a></li>
            <li><a href="#">Графіки особистого прийому</a></li>
            <li><a href="#">Успіхи та звіти «Таємний клієнт»</a></li>
            <li><a href="#">Євроінтеграція та співпраця</a></li>
          </ul>
        </li>
        <li><button>Послуги</button></li>
        <li><button>Кабінет водія</button></li>
        <li><button>Е-запис</button></li>
        <li class="dropdown">
          <button>Контакти</button>
          <ul class="dropdown-menu">
            <li><a href="#">Контакти ГСЦ</a></li>
            <li><a href="#">Контакти РСЦ/ТСЦ</a></li>
            <li><a href="#">Розпорядок роботи</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <button>Публічна інформація</button>
          <ul class="dropdown-menu">
            <li class="corruption"><a href="#">Запобігання корупції</a></li>
            <li><a href="#">Відомості з реєстру ТЗ</a></li>
            <li><a href="#">Е-звернення громадян</a></li>
            <li><a href="#">Запит на інформацію</a></li>
            <li><a href="#">Держзакупівлі</a></li>
            <li><a href="#">Громадська експертиза</a></li>
            <li><a href="#">Оголошення</a></li>
            <li><a href="#">Нормативна база</a></li>
            <li><a href="#">Колегія</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <div class="lang-switch">
      <a href="#" class="btn-language">Change language: Eng</a>
    </div>
  </header>

  <section class="check-result">
    <h2>Результат перевірки посвідчення водія:</h2>
    <div id="userInfo" class="doc-info"></div>
    <div class="result-action">
      <button class="btn-success" onclick="history.back()">ПОВЕРНУТИСЯ</button>
    </div>
  </section>

  <footer class="site-footer">
    <div class="footer-col">
      <p>Функціонал у режимі дослідної експлуатації.<br>
      За пропозиціями: <a href="mailto:info@hsc.gov.ua">info@hsc.gov.ua</a></p>
    </div>
    <div class="footer-col">
      <p>© 2016–2024. Головний сервісний центр МВС</p>
    </div>
    <div class="footer-col">
      <p>04085, Київ-85, вул. Лук’янівська, 62<br>
      Інфо-центр: 044-290-19-88</p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('nav-toggle').addEventListener('click', () => {
        document.querySelector('.main-nav').classList.toggle('open');
      });
      document.querySelectorAll('.main-nav .dropdown > button')
        .forEach(btn => {
          btn.addEventListener('click', e => {
            if (window.innerWidth <= 900) {
              btn.parentElement.classList.toggle('open');
              e.stopPropagation();
            }
          });
        });
    });
  </script>

  <script>
    (function(){
      const BASE = 'https://tssc.onrender.com';
      const container = document.getElementById('userInfo');
      const q = new URLSearchParams(location.search).get('id');
      if (!q) {
        container.textContent = 'Не вказано id';
        return;
      }
      fetch(`${BASE}/api/users/${encodeURIComponent(q)}`)
        .then(r => {
          if (!r.ok) throw new Error('Користувача не знайдено');
          return r.json();
        })
        .then(u => {
          // Очищаем контейнер перед рендером
          container.innerHTML = '';

          // 1. ФИО пользователя
          const nameEl = document.createElement('div');
          nameEl.className = 'user-fullname';
          nameEl.textContent = (u.name || '').toUpperCase();
          container.appendChild(nameEl);

          // 2. Основной список полей
          const dl = document.createElement('dl');
          [
            ['Статус:',           u.status],
            ['Дата народження:',  u.dob],
            ['Дата видачі:',      u.issueDate],
            ['Строк дії до:',     u.expiryDate],
            ['Ким видано:',       u.issuedBy],
            ['Серія та номер:',   u.seriesNum],
            ['Обмеження:',        u.restrictions || '—']
          ].forEach(([label, val]) => {
            const dt = document.createElement('dt'); dt.textContent = label;
            const dd = document.createElement('dd'); dd.textContent = val || '—';
            dl.append(dt, dd);
          });

          // 3. Категории
          if (Array.isArray(u.categories)) {
            u.categories.forEach(c => {
              const dt = document.createElement('dt');
              dt.textContent = 'Категорія: ' + (c.cat || '—');
              const dd = document.createElement('dd');
              dd.textContent = 'Дата видачі: ' + (c.date || '—');
              dl.append(dt, dd);
            });
          }

          container.appendChild(dl);
        })
        .catch(err => {
          container.textContent = err.message;
        });
    })();
  </script>
</body>
</html> 